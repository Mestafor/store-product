(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[9],{"./src/client/ts/Components/StickyAside/index.ts":function(t,e,i){"use strict";i.r(e);var s;!function(t){t.DESKTOP="desktop-only",t.MOBILE="mobile-only",t.ALL="all"}(s||(s={}));var o=function(){function t(t){this._fixBlockAfterHide=!1,this._state={changeOnScroll:!1,fixed:!1,bottom:!1,elementIsAbsoluted:!1,elementIsFixedToTopScreen:!1,elementIsFixedToBottomScreen:!1,elementIsAbsolutedToBottomContent:!1},this._TOP_INDENT=0,this._scrollTop=0,this._onUnfix=function(){},this._$el=t.el,this._$topHeader=t.topHeader,t.fixBlockAfterHide&&(this._fixBlockAfterHide=t.fixBlockAfterHide),"function"==typeof t.onUnfixCallback&&(this._onUnfix=t.onUnfixCallback);var e=this._$el.parentNode;this._$relativeContent=e,this._runState=this._$el.dataset.runState||s.DESKTOP,this._$topHeader.classList.contains("project-header--relative")&&(this._TOP_INDENT=25);var i=this._$el.dataset.topIndent;if("string"==typeof i&&(this._TOP_INDENT=+i||0),this._$relativeContent){var o,n=this._$relativeContent.getBoundingClientRect(),l=this._$el.getBoundingClientRect();o=this._$el,this._$el=o,n.height>l.height&&(this._state.changeOnScroll=!0)}}return t.prototype.onScroll=function(t,e){void 0===e&&(e=!1);var i=!1;if(this._scrollTop!==t||e){if(this._scrollTop>t&&(i=!0),this._scrollTop=t,this._runState===s.DESKTOP){if(window.innerWidth<992)return void this._unfix()}else if(this._runState===s.MOBILE&&window.innerWidth>=992)return void this._unfix();this._$el&&this._$topHeader&&this._$relativeContent&&this._changeOnScroll(i)}},t.prototype.onResize=function(t){var e=this;this._$relativeContent.style.minHeight="",setTimeout((function(){e._unfix(),e.onScroll(t,!0)}),0)},t.prototype._caluclateContentTopPos=function(t,e){return this._fixBlockAfterHide?e.top+t.height+this._TOP_INDENT:e.top},t.prototype._changeOnScroll=function(t){var e=this._$el.getBoundingClientRect(),i=this._$relativeContent.getBoundingClientRect(),s=this._TOP_INDENT,o=this._caluclateContentTopPos(e,i),n=i.bottom,l=e.bottom,h=e.top;if(!(e.height>=i.height))if(window.innerHeight>e.height){var a="\n                position: absolute;\n                top: unset;\n                bottom: 0;\n                width: "+i.width+"px;\n            ";s<o?this._unfix():s>=n||l>=n||s+e.height>=n?this._state.bottom&&s<h?this._state.elementIsFixedToTopScreen||this._fixToTopScreen(e,i,s):this._state.elementIsAbsolutedToBottomContent||this._absoluteToBottomContent(a):this._state.elementIsFixedToTopScreen||this._fixToTopScreen(e,i,s)}else{var _=l-window.innerHeight+this._TOP_INDENT<0;if(s<o)this._unfix();else if(t){if(h>=s)h>o&&(this._state.elementIsFixedToTopScreen||this._fixToTopScreen(e,i,s));else if(h<s&&!_&&!this._state.elementIsAbsoluted){var c="\n                            position: absolute;\n                            top: "+(-o+e.top)+"px;\n                            left: unset;\n                            right: unset;\n                            width: "+i.width+"px;\n                        ";this._absoluteToContent(c)}}else if(this._state.elementIsFixedToTopScreen){c="\n                        position: absolute;\n                        top: "+(-o+e.top+s)+"px;\n                        left: unset;\n                        right: unset;\n                        width: "+i.width+"px;\n                      ";this._absoluteToContent(c)}else if(n+s<window.innerHeight){if(!this._state.elementIsAbsolutedToBottomContent){a="\n                          position: absolute;\n                          top: unset;\n                          bottom: 0;\n                          width: "+i.width+"px;\n                        ";this._absoluteToBottomContent(a)}}else l+s<window.innerHeight&&(this._state.elementIsFixedToBottomScreen||this._fixToBottomScreen(e,i,s))}},t.prototype._absoluteToBottomContent=function(t){this._$el.classList.contains("--fix")||this._$el.classList.add("--fix"),this._$el.style.cssText=t,this._state.elementIsAbsoluted=!1,this._state.elementIsAbsolutedToBottomContent=!0,this._state.elementIsFixedToBottomScreen=!1,this._state.elementIsFixedToTopScreen=!1,this._state.bottom=!0,this._state.fixed=!1},t.prototype._absoluteToContent=function(t){this._$el.classList.contains("--fix")||this._$el.classList.add("--fix"),this._$el.style.cssText=t,this._state.elementIsAbsoluted=!0,this._state.elementIsAbsolutedToBottomContent=!1,this._state.elementIsFixedToBottomScreen=!1,this._state.elementIsFixedToTopScreen=!1},t.prototype._fixToBottomScreen=function(t,e,i){this._$el.classList.contains("--fix")||this._$el.classList.add("--fix");var s="\n            position: fixed;\n            bottom: "+i+"px;\n            left: "+e.left+"px;\n            right: unset;\n            width: "+e.width+"px;\n        ";this._$el.style.cssText=s,this._state.elementIsAbsoluted=!1,this._state.elementIsAbsolutedToBottomContent=!1,this._state.elementIsFixedToBottomScreen=!0,this._state.elementIsFixedToTopScreen=!1},t.prototype._fixToTopScreen=function(t,e,i){this._$el.classList.contains("--fix")||this._$el.classList.add("--fix");var s="\n          position: fixed;\n          top: "+i+"px;\n          left: "+(this._$el.classList.contains("project-asides-block__aside--right")?e.right-t.width:e.left)+"px;\n          right: unset;\n          width: "+e.width+"px;\n        ";this._$el.style.cssText=s,this._state.elementIsAbsoluted=!1,this._state.elementIsAbsolutedToBottomContent=!1,this._state.elementIsFixedToBottomScreen=!1,this._state.elementIsFixedToTopScreen=!0,this._state.fixed=!0,this._state.bottom=!1},t.prototype._unfix=function(){this._$el.classList.contains("--fix")&&this._$el.classList.remove("--fix"),this._$el.style.cssText="",this._$relativeContent.style.minHeight="",this._state.fixed=!1,this._state.bottom=!1,this._state.elementIsAbsoluted=!1,this._state.elementIsAbsolutedToBottomContent=!1,this._state.elementIsFixedToBottomScreen=!1,this._state.elementIsFixedToTopScreen=!1,this._onUnfix()},t}();var n;e.default=(n=[],{add:function(t){n.push(new o(t))},onScroll:function(t){n.forEach((function(e){e.onScroll(t)}))},onResize:function(t){n.forEach((function(e){e.onResize(t)}))}})}}]);