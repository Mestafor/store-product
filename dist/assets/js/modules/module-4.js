(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[4],{"./src/client/ts/Components/BlogPostCarousel/index.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"BlogPostCarousel",(function(){return l}));var s=o("./src/client/ts/helpers.ts"),r=o("./src/client/ts/lib/ModuleLoader/index.ts"),n=o("./src/client/ts/Components/SmoothAnchor/index.ts"),l=function(){function t(t){var e=this;if(this.scroll=null,this._itemsWrapper=null,this._scrollBtnWrapper=null,this._scrollNextBtn=null,this._scrollPrevBtn=null,this.state={items:{currentX:0},scroll:{currentX:0},isLineMove:!1,isMouseMove:!1,isMouseDown:!1},this._statusLine=null,this.config=Object.assign({showControls:!0},t),this.element=this.config.el.querySelector(".project-post-carousel"),this.parent=this.config.el.parentNode,this.element){var o=this.element.querySelector(".project-post-carousel__items");if(o){this._itemsWrapper=o;var s=o.dataset.itemsCount||3,n=o.children;o&&n.length>s&&(o.classList.add("box-model-default-r"),o.classList.add("project-post-carousel__items--show-after"))}this.parent.classList.add("project-carousel--loaded")}this.config.showStatusLine&&(this.scroll=this.addScroll()),this.scroll&&r.b.load({name:r.a.SCROLL_STATUS_LINE}).then((function(t){e._statusLine=new t.ScrollStatusLine({elem:e.scroll})})),this.initWrapperScroll(),this.initMouseMove(),this.config.showControls&&(this._scrollBtnWrapper=this.parent.querySelector(".project-carousel__nav-wrapper"),this._scrollBtnWrapper?(this._scrollNextBtn=this._scrollBtnWrapper.querySelector(".project-carousel__nav-next"),this._scrollNextBtn&&this.createRightButton(this._scrollNextBtn),this._scrollPrevBtn=this._scrollBtnWrapper.querySelector(".project-carousel__nav-prev"),this._scrollPrevBtn&&this.createLeftButton(this._scrollPrevBtn)):(this.createButtonWrapper(),this.createRightButton(),this.createLeftButton()))}return t.prototype._drawLineOnScroll=function(t,e,o){this._statusLine&&this._statusLine.draw({scrollTop:t,scrollHeight:e,height:o})},t.prototype.hasScroll=function(){return this.config.el.scrollWidth>this.config.el.clientWidth},t.prototype.isScrolled=function(){return this.config.el.scrollLeft>0},t.prototype._animateScroll=function(t,e){var o=this;n.default._animate({duration:200,timing:function(t){return t},draw:function(s){s=s<0?0:s,o.state.isMouseDown||(o.config.el.scrollLeft=t+e*s)}})},t.prototype.createButtonWrapper=function(){var t=s.a.createNode("div").attr({class:"project-carousel__nav-wrapper project-container hover-box__item--show-on-hover"});this._scrollBtnWrapper=t.getNode();var e=this.config.el.parentNode;if(e){var o=e.querySelector(".project-carousel__nav-wrapper");this._scrollBtnWrapper=t.getNode(),e.classList.add("u-relative"),e.classList.add("hover-box"),o?e.replaceChild(t.getNode(),o):e.appendChild(t.getNode())}},t.prototype.createLeftButton=function(t){var e,o=this;(e=t?s.a.node(t):s.a.createNode("div").attr({class:"project-carousel__nav-prev project-carousel__nav-prev--left project-carousel__nav-prev--style-1 cursor-pinter"}).innerHtml('\n                        <svg class="absolute-centered" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"></path></svg>\n                    ')).event("click",(function(t){t.preventDefault();var e=o._itemsWrapper;if(e){var s=o.config.el.scrollLeft,r=-e.clientWidth;o._animateScroll(s,r)}})),this._scrollBtnWrapper&&(this._scrollPrevBtn=e.getNode(),!this.hasScroll()&&this._scrollPrevBtn&&(this._scrollPrevBtn.classList.add("project-carousel__nav-prev--hide"),t||this._scrollBtnWrapper.appendChild(this._scrollPrevBtn)))},t.prototype.createRightButton=function(t){var e,o=this;(e=t?s.a.node(t):s.a.createNode("div").attr({class:"project-carousel__nav-next project-carousel__nav-next--right project-carousel__nav-next--style-1 cursor-pointer"}).innerHtml('\n                            <svg class="absolute-centered" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">\n                                <g transform="translate(12.000000, 12.000000) scale(-1, 1) translate(-12.000000, -12.000000) ">\n                                    <polygon points="15.41 7.41 14 6 8 12 14 18 15.41 16.59 10.83 12"></polygon>\n                                </g>\n                            </svg>\n                        ')).event("click",(function(t){t.preventDefault(),t.stopPropagation();var e=o._itemsWrapper;if(e){var s=o.config.el.scrollLeft,r=e.clientWidth*(Math.floor(s/e.clientWidth)+1)-s;o._animateScroll(s,r)}})),this._scrollBtnWrapper&&(this._scrollNextBtn=e.getNode(),!this.hasScroll()&&this._scrollNextBtn&&this._scrollNextBtn.classList.add("project-carousel__nav-next--hide"),t||this._scrollBtnWrapper.appendChild(e.getNode()))},t.prototype.updateView=function(){this._itemsWrapper&&(this.hasScroll()?this._itemsWrapper.classList.add("project-post-carousel__items--show-after"):this._itemsWrapper.classList.remove("project-post-carousel__items--show-after")),this._scrollNextBtn&&(this.state.scroll.currentX>=this.config.el.scrollWidth?this._scrollNextBtn.classList.add("project-carousel__nav-next--hide"):this._scrollNextBtn.classList.remove("project-carousel__nav-next--hide")),this._scrollPrevBtn&&(this.state.scroll.currentX>0?this._scrollPrevBtn.classList.remove("project-carousel__nav-prev--hide"):this._scrollPrevBtn.classList.add("project-carousel__nav-prev--hide"))},t.prototype.updateScrollPosition=function(e,o){void 0===o&&(o="");var s=e||0;if(s<0&&(s=0),this.scroll){var r=this.scroll.parentNode.clientWidth-t.SCROLL_WIDTH;s>r&&(s=r),this.scroll.style.cssText="\n        transform: translate3d("+s+"px, 0, 0);\n        "+o+"\n      "}},t.prototype.getItemsWidth=function(e,o){var s=0;return window.innerWidth>=992?(t.ITEMS_COUNT=3,s=2):window.innerWidth>=768?(t.ITEMS_COUNT=2,s=1):t.ITEMS_COUNT=1,(e-t.ITEM_MARGIN*s)/t.ITEMS_COUNT*o+t.ITEM_MARGIN*(o-1)-e},t.prototype.calculateScrollPos=function(e){if(e>0)return 0;var o=this.config.el.clientWidth,s=this.config.el.children.length,r=e/this.getItemsWidth(o,s),n=(o-t.SCROLL_WIDTH)*r*-1;return n>o-t.SCROLL_WIDTH&&(n=o-t.SCROLL_WIDTH),this.state.scroll.currentX=n,n},t.prototype.initMouseMove=function(){var t=this,e=this.config.el.parentNode,o=!1,s=0,r=0,n=function(e){if(o){t.state.isMouseMove=!0,t.config.el.classList.add("--moving"),"mousemove"===e.type?r=e.clientX:"touchmove"===e.type&&(r=e.touches[0].clientX);var n=s-r;t.config.el.scrollLeft=t.state.scroll.currentX+n}},l=function(e){t.state.isLineMove=!1,t.state.isMouseMove=!1,t.state.isMouseDown=!1,o=!1,t.state.scroll.currentX+=s-r,t.config.el.classList.remove("--moving"),"mouseup"===e.type?(document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",l)):"touchend"===e.type&&(document.removeEventListener("touchmove",n),document.removeEventListener("touchend",l))};"onmousedown"in document.documentElement&&e.addEventListener("mousedown",(function(e){e.preventDefault(),t.state.isMouseDown=!0,o=!0,t.state.scroll.currentX=t.config.el.scrollLeft,"mousedown"===e.type?(s=r=e.clientX,document.addEventListener("mousemove",n),document.addEventListener("mouseup",l)):"touchstart"===e.type&&(s=r=e.touches[0].clientX,document.addEventListener("touchmove",n),document.addEventListener("touchend",l))}))},t.prototype.initScrollMove=function(){var e=this;if(this.hasScroll()){var o=this.scroll,s=!1,r=0,n=0;if(o){var l=function(t){t.preventDefault(),t.stopPropagation(),s=!0,e.state.scroll.currentX=e.calculateLinePosRelativeToScroll(e.config.el.scrollLeft),"ontouchstart"in document.documentElement?(r=n=t.touches[0].clientX,document.addEventListener("touchmove",i),document.addEventListener("touchend",c)):(r=n=t.clientX,document.addEventListener("mousemove",i),document.addEventListener("mouseup",c))},i=function(t){if(s){e.state.isLineMove=!0,e.state.isMouseMove=!0,n="ontouchstart"in document.documentElement?t.touches[0].clientX:t.clientX;var o=r-n;e.config.el.classList.add("--moving"),e.updateScrollPosition(e.state.scroll.currentX-o),e.updateScroll(e.calculateScrollRelativeToLine(e.state.scroll.currentX-o))}},c=function(o){e.state.isLineMove=!1,e.state.isMouseMove=!1,s=!1,e.state.scroll.currentX<0?e.state.scroll.currentX=0:e.state.scroll.currentX>e.config.el.clientWidth-t.SCROLL_WIDTH&&(e.state.scroll.currentX=e.config.el.clientWidth-t.SCROLL_WIDTH),e.config.el.classList.remove("--moving"),"ontouchstart"in document.documentElement?(document.removeEventListener("touchmove",i),document.removeEventListener("touchend",c)):(document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",c))};"ontouchstart"in document.documentElement?o.addEventListener("touchstart",l):o.addEventListener("mousedown",l)}}},t.prototype.calculateLinePosRelativeToScroll=function(e){if(this.scroll){var o=this.scroll.parentNode;if(o){var s=e/(this.config.el.scrollWidth-this.config.el.clientWidth);return(o.clientWidth-t.SCROLL_WIDTH)*s}}return e},t.prototype.calculateScrollRelativeToLine=function(e){if(this.scroll){var o=this.scroll.parentNode;if(o){var s=e/(o.clientWidth-t.SCROLL_WIDTH);return(this.config.el.scrollWidth-this.config.el.clientWidth)*s}}return e},t.prototype.initWrapperScroll=function(){var t,e=this,o=this.config.el;o&&o.addEventListener("scroll",(function(s){if(!e.state.isLineMove){clearTimeout(t),e.state.isMouseMove||(e.config.el.classList.add("--moving"),t=setTimeout((function(){e.config.el.classList.remove("--moving")}),200));var r=s.currentTarget.scrollLeft;e.updateScrollPosition(e.calculateLinePosRelativeToScroll(r)),e._drawLineOnScroll(r,o.scrollWidth,o.clientWidth),e._scrollNextBtn&&(e.element&&r+o.clientWidth>=o.scrollWidth?e._scrollNextBtn.classList.add("project-carousel__nav-next--hide"):e._scrollNextBtn.classList.remove("project-carousel__nav-next--hide")),e._scrollPrevBtn&&(r<=0?e._scrollPrevBtn.classList.add("project-carousel__nav-prev--hide"):e._scrollPrevBtn.classList.remove("project-carousel__nav-prev--hide"))}}))},t.prototype.updateScroll=function(t){this.config.el.scrollLeft=t},t.prototype.addScroll=function(){if(this.element&&"false"===this.element.dataset.scroll)return null;var t=s.a.createNode("div").attr({class:"project-post-carousel__scroll"}),e=s.a.createNode("div").attr({class:"project-post-carousel__scroll-wrapper"}).add(t.getNode());return this.parent.insertBefore(e.getNode(),this.parent.firstChild),t.getNode()},t.SCROLL_WIDTH=150,t.ITEM_MARGIN=30,t.ITEMS_COUNT=3,t}()}}]);